# QuartzCronJP

Quartz Cronå¼ã‚’æ—¥æœ¬èªã«ç¿»è¨³ã™ã‚‹JavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒª

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

## ç‰¹å¾´

- ğŸ‡¯ğŸ‡µ è‡ªç„¶ãªæ—¥æœ¬èªç¿»è¨³
- âœ… è©³ç´°ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- ğŸ“¦ ä¾å­˜é–¢ä¿‚ãªã—ï¼ˆVanilla JSï¼‰
- ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶/Node.jsä¸¡å¯¾å¿œï¼ˆUMDå½¢å¼ï¼‰
- ğŸ”§ Quartzç‰¹æœ‰ã®è¨˜å·ï¼ˆL, W, #ï¼‰ã«å¯¾å¿œ

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ãƒ–ãƒ©ã‚¦ã‚¶

```html
<script src="quartz-cron-jp.js"></script>
```

### Node.js

```bash
npm install quartz-cron-jp
```

```javascript
const QuartzCronJP = require('quartz-cron-jp');
```

### ES Modules

```javascript
import QuartzCronJP from 'quartz-cron-jp';
```

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

```javascript
// ç¿»è¨³
var result = QuartzCronJP.translate('0 30 9 ? * MON-FRI');

if (result.success) {
  console.log(result.description);
  // â†’ "æ¯é€±å¹³æ—¥ï¼ˆæœˆã€œé‡‘ï¼‰ 9æ™‚30åˆ†ã«å®Ÿè¡Œ"
} else {
  console.error(result.error);
}
```

## API

### `QuartzCronJP.translate(cronExpression, [options])`

Cronå¼ã‚’æ—¥æœ¬èªã«ç¿»è¨³ã—ã¾ã™ã€‚

#### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | èª¬æ˜ |
|-----------|------|------|
| `cronExpression` | string | Quartz Cronå¼ |
| `options.skipValidation` | boolean | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰ |

#### æˆ»ã‚Šå€¤

æˆåŠŸæ™‚:
```javascript
{
  success: true,
  description: "æ¯é€±å¹³æ—¥ï¼ˆæœˆã€œé‡‘ï¼‰ 9æ™‚30åˆ†ã«å®Ÿè¡Œ",
  fields: {
    second: { raw: "0", parsed: {...}, translated: "0ç§’" },
    minute: { raw: "30", parsed: {...}, translated: "30åˆ†" },
    hour: { raw: "9", parsed: {...}, translated: "9æ™‚" },
    dayOfMonth: { raw: "?", parsed: {...}, translated: "" },
    month: { raw: "*", parsed: {...}, translated: "æ¯æœˆ" },
    dayOfWeek: { raw: "MON-FRI", parsed: {...}, translated: "å¹³æ—¥ï¼ˆæœˆã€œé‡‘ï¼‰" },
    year: null
  }
}
```

ã‚¨ãƒ©ãƒ¼æ™‚:
```javascript
{
  success: false,
  error: "æ—¥ã¨æ›œæ—¥ã¯åŒæ™‚ã«æŒ‡å®šã§ãã¾ã›ã‚“ã€‚ã©ã¡ã‚‰ã‹ã‚’ã€Œ?ã€ã«ã—ã¦ãã ã•ã„",
  validationErrors: [
    "æ—¥ã¨æ›œæ—¥ã¯åŒæ™‚ã«æŒ‡å®šã§ãã¾ã›ã‚“ã€‚ã©ã¡ã‚‰ã‹ã‚’ã€Œ?ã€ã«ã—ã¦ãã ã•ã„"
  ]
}
```

### `QuartzCronJP.validate(cronExpression)`

Cronå¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```javascript
var validation = QuartzCronJP.validate('0 0 25 * * ?');

console.log(validation.isValid);  // false
console.log(validation.errors);   // ["æ™‚ã®å€¤ã€Œ25ã€ã¯ç¯„å›²å¤–ã§ã™ï¼ˆ0ã€œ23ï¼‰"]
```

#### æˆ»ã‚Šå€¤

```javascript
{
  isValid: boolean,
  errors: string[],
  warnings: string[]
}
```

### `QuartzCronJP.parseField(value, fieldType)`

å€‹åˆ¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è§£æã—ã¾ã™ï¼ˆä¸Šç´šè€…å‘ã‘ï¼‰ã€‚

```javascript
var parsed = QuartzCronJP.parseField('MON-FRI', 'dayOfWeek');
// â†’ { type: 'range', from: 'MON', to: 'FRI' }
```

### `QuartzCronJP.translateField(parsed, fieldType)`

è§£æçµæœã‚’æ—¥æœ¬èªã«å¤‰æ›ã—ã¾ã™ï¼ˆä¸Šç´šè€…å‘ã‘ï¼‰ã€‚

```javascript
var translated = QuartzCronJP.translateField(
  { type: 'range', from: 'MON', to: 'FRI' },
  'dayOfWeek'
);
// â†’ { text: 'å¹³æ—¥ï¼ˆæœˆã€œé‡‘ï¼‰' }
```

## ç¿»è¨³ä¾‹

| Cronå¼ | æ—¥æœ¬èª |
|--------|--------|
| `0 0 12 * * ?` | æ¯æ—¥12æ™‚00åˆ†ã«å®Ÿè¡Œ |
| `0 30 9 ? * MON-FRI` | æ¯é€±å¹³æ—¥ï¼ˆæœˆã€œé‡‘ï¼‰ 9æ™‚30åˆ†ã«å®Ÿè¡Œ |
| `0 0/15 * * * ?` | 15åˆ†ã”ã¨ |
| `0 10/20 * * * ?` | æ¯æ™‚10åˆ†ã‹ã‚‰20åˆ†é–“éš” |
| `0 30 8,12,18 * * ?` | æ¯æ—¥8ãƒ»12ãƒ»18æ™‚30åˆ†ã«å®Ÿè¡Œ |
| `0 0 10 ? * 2#1` | æ¯æœˆç¬¬1æœˆæ›œæ—¥ 10æ™‚00åˆ†ã«å®Ÿè¡Œ |
| `0 0 18 L * ?` | æ¯æœˆæœ«æ—¥ 18æ™‚00åˆ†ã«å®Ÿè¡Œ |
| `0 30 9 ? * 1L` | æ¯æœˆæœ€çµ‚æ—¥æ›œæ—¥ 9æ™‚30åˆ†ã«å®Ÿè¡Œ |
| `0 0 9 15W * ?` | æ¯æœˆ15æ—¥ã«æœ€ã‚‚è¿‘ã„å¹³æ—¥ 9æ™‚00åˆ†ã«å®Ÿè¡Œ |
| `0 0 0 1 1 ? 2025` | 2025å¹´1æœˆ1æ—¥ 0æ™‚00åˆ†ã«å®Ÿè¡Œ |

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

ä»¥ä¸‹ã®ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ï¼š

| ãƒã‚§ãƒƒã‚¯é …ç›® | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹ |
|-------------|------------------|
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°ï¼ˆ6-7ï¼‰ | Quartz Cronã¯6ã€œ7ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å¿…è¦ã§ã™ |
| æ—¥ã¨æ›œæ—¥ã®åŒæ™‚æŒ‡å®š | æ—¥ã¨æ›œæ—¥ã¯åŒæ™‚ã«æŒ‡å®šã§ãã¾ã›ã‚“ |
| æ—¥ã¨æ›œæ—¥ã®ä¸¡æ–¹ãŒ? | æ—¥ã¨æ›œæ—¥ã®ä¸¡æ–¹ã‚’ã€Œ?ã€ã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ |
| å€¤ã®ç¯„å›² | æ™‚ã®å€¤ã€Œ25ã€ã¯ç¯„å›²å¤–ã§ã™ï¼ˆ0ã€œ23ï¼‰ |
| ç‰¹æ®Šè¨˜å·ã®ä½ç½® | ã€ŒLã€ã¯æ—¥ã¾ãŸã¯æ›œæ—¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã®ã¿ä½¿ç”¨ã§ãã¾ã™ |
| æ›œæ—¥åã®å¦¥å½“æ€§ | æ›œæ—¥ã€ŒABCã€ã¯ç„¡åŠ¹ã§ã™ |
| æœˆåã®å¦¥å½“æ€§ | æœˆã€ŒXYZã€ã¯ç„¡åŠ¹ã§ã™ |

## Quartz Cronå½¢å¼

```
ç§’ åˆ† æ™‚ æ—¥ æœˆ æ›œæ—¥ [å¹´]
```

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç¯„å›²

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | ç¯„å›² | ç‰¹æ®Šæ–‡å­— |
|-----------|------|----------|
| ç§’ | 0-59 | , - * / |
| åˆ† | 0-59 | , - * / |
| æ™‚ | 0-23 | , - * / |
| æ—¥ | 1-31 | , - * / ? L W |
| æœˆ | 1-12 ã¾ãŸã¯ JAN-DEC | , - * / |
| æ›œæ—¥ | 1-7 ã¾ãŸã¯ SUN-SAT | , - * / ? L # |
| å¹´ | 1970-2099 | , - * / |

### ç‰¹æ®Šæ–‡å­—

| æ–‡å­— | èª¬æ˜ | ä½¿ç”¨å¯èƒ½ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
|------|------|------------------|
| `*` | ã™ã¹ã¦ã®å€¤ | ã™ã¹ã¦ |
| `?` | å€¤ã‚’æŒ‡å®šã—ãªã„ | æ—¥ã€æ›œæ—¥ |
| `-` | ç¯„å›² | ã™ã¹ã¦ |
| `,` | è¤‡æ•°ã®å€¤ | ã™ã¹ã¦ |
| `/` | é–“éš” | ã™ã¹ã¦ |
| `L` | æœ€çµ‚ | æ—¥ã€æ›œæ—¥ |
| `W` | æœ€ã‚‚è¿‘ã„å¹³æ—¥ | æ—¥ |
| `#` | ç¬¬næ›œæ—¥ | æ›œæ—¥ |

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ä½œè€…

Ryohei Takada (with Claude)