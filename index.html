<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quartz Cron æ—¥æœ¬èªç¿»è¨³ãƒ„ãƒ¼ãƒ«</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #1e293b 100%);
      min-height: 100vh;
      padding: 2rem;
      color: #e2e8f0;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
    }
    
    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: #f8fafc;
    }
    
    .subtitle {
      text-align: center;
      color: #94a3b8;
      margin-bottom: 2rem;
    }
    
    .card {
      background: #1e293b;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
    }
    
    .card-title {
      font-size: 0.875rem;
      color: #94a3b8;
      margin-bottom: 0.75rem;
      font-weight: 500;
    }
    
    .input-wrapper {
      position: relative;
    }
    
    #cronInput {
      width: 100%;
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 1rem 1.25rem;
      font-size: 1.25rem;
      font-family: 'SF Mono', 'Fira Code', 'Fira Mono', Menlo, Monaco, monospace;
      color: #f8fafc;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    #cronInput:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }
    
    #cronInput::placeholder {
      color: #475569;
    }
    
    /* çµæœè¡¨ç¤º */
    .result {
      font-size: 1.5rem;
      font-weight: 500;
    }
    
    .result.success {
      color: #4ade80;
    }
    
    .result.error {
      color: #f87171;
    }
    
    .error-list {
      list-style: none;
      margin-top: 0.75rem;
    }
    
    .error-list li {
      font-size: 0.875rem;
      color: #fca5a5;
      padding: 0.25rem 0;
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
    }
    
    .error-list li::before {
      content: 'â€¢';
      color: #ef4444;
    }
    
    /* ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´° */
    .fields-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 0.75rem;
    }
    
    .field-item {
      background: #0f172a;
      border-radius: 8px;
      padding: 0.75rem;
      text-align: center;
    }
    
    .field-label {
      font-size: 0.75rem;
      color: #64748b;
      margin-bottom: 0.25rem;
    }
    
    .field-raw {
      font-family: monospace;
      font-size: 1rem;
      color: #60a5fa;
      margin-bottom: 0.25rem;
    }
    
    .field-translated {
      font-size: 0.875rem;
      color: #a5b4fc;
    }
    
    /* ã‚µãƒ³ãƒ—ãƒ« */
    .examples-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 0.5rem;
    }
    
    .example-btn {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 6px;
      padding: 0.75rem 1rem;
      text-align: left;
      cursor: pointer;
      transition: background-color 0.2s, border-color 0.2s;
      color: inherit;
    }
    
    .example-btn:hover {
      background: #1e293b;
      border-color: #3b82f6;
    }
    
    .example-cron {
      font-family: monospace;
      font-size: 0.875rem;
      color: #60a5fa;
    }
    
    .example-desc {
      font-size: 0.75rem;
      color: #94a3b8;
      margin-top: 0.25rem;
    }
    
    /* ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ */
    .reference-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .reference-table th,
    .reference-table td {
      padding: 0.5rem 0.75rem;
      text-align: left;
      border-bottom: 1px solid #334155;
    }
    
    .reference-table th {
      color: #94a3b8;
      font-weight: 500;
      font-size: 0.875rem;
    }
    
    .reference-table td {
      font-size: 0.875rem;
    }
    
    .reference-table code {
      background: #0f172a;
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-family: monospace;
      color: #60a5fa;
    }
    
    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    .footer {
      text-align: center;
      margin-top: 2rem;
      color: #64748b;
      font-size: 0.875rem;
    }
    
    .footer a {
      color: #60a5fa;
      text-decoration: none;
    }
    
    .footer a:hover {
      text-decoration: underline;
    }
    
    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
    @media (max-width: 640px) {
      body {
        padding: 1rem;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .result {
        font-size: 1.25rem;
      }
      
      .fields-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ• Quartz Cron æ—¥æœ¬èªç¿»è¨³ãƒ„ãƒ¼ãƒ«</h1>
    <p class="subtitle">Quartzå½¢å¼ã®Cronå¼ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€æ—¥æœ¬èªã§èª¬æ˜ã—ã¾ã™</p>
    
    <!-- å…¥åŠ›ã‚¨ãƒªã‚¢ -->
    <div class="card">
      <div class="card-title">Cronå¼ã‚’å…¥åŠ›ï¼ˆç§’ åˆ† æ™‚ æ—¥ æœˆ æ›œæ—¥ [å¹´]ï¼‰</div>
      <div class="input-wrapper">
        <input 
          type="text" 
          id="cronInput" 
          value="0 30 9 ? * MON-FRI"
          placeholder="0 0 12 * * ?"
          autocomplete="off"
          spellcheck="false"
        >
      </div>
    </div>
    
    <!-- çµæœè¡¨ç¤º -->
    <div class="card">
      <div class="card-title">ç¿»è¨³çµæœ</div>
      <div id="result" class="result"></div>
      <ul id="errorList" class="error-list" style="display: none;"></ul>
    </div>
    
    <!-- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´° -->
    <div class="card" id="fieldsCard" style="display: none;">
      <div class="card-title">ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°</div>
      <div id="fieldsGrid" class="fields-grid"></div>
    </div>
    
    <!-- ã‚µãƒ³ãƒ—ãƒ« -->
    <div class="card">
      <div class="card-title">ã‚µãƒ³ãƒ—ãƒ«ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å…¥åŠ›ï¼‰</div>
      <div id="examples" class="examples-grid"></div>
    </div>
    
    <!-- ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ -->
    <div class="card">
      <div class="card-title">ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</div>
      <table class="reference-table">
        <thead>
          <tr>
            <th>è¨˜å·</th>
            <th>æ„å‘³</th>
            <th>ä¾‹</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>*</code></td>
            <td>ã™ã¹ã¦ã®å€¤</td>
            <td>æ¯ç§’ã€æ¯åˆ†ã€æ¯æ™‚ãªã©</td>
          </tr>
          <tr>
            <td><code>?</code></td>
            <td>å€¤ã‚’æŒ‡å®šã—ãªã„</td>
            <td>æ—¥ã¾ãŸã¯æ›œæ—¥ã§ä½¿ç”¨</td>
          </tr>
          <tr>
            <td><code>-</code></td>
            <td>ç¯„å›²</td>
            <td><code>MON-FRI</code> â†’ æœˆã€œé‡‘æ›œæ—¥</td>
          </tr>
          <tr>
            <td><code>,</code></td>
            <td>è¤‡æ•°ã®å€¤</td>
            <td><code>1,15</code> â†’ 1æ—¥ã¨15æ—¥</td>
          </tr>
          <tr>
            <td><code>/</code></td>
            <td>é–“éš”</td>
            <td><code>0/15</code> â†’ 15åˆ†ã”ã¨</td>
          </tr>
          <tr>
            <td><code>L</code></td>
            <td>æœ€çµ‚</td>
            <td><code>L</code> â†’ æœˆæœ«ã€<code>1L</code> â†’ æœ€çµ‚æ—¥æ›œ</td>
          </tr>
          <tr>
            <td><code>W</code></td>
            <td>æœ€ã‚‚è¿‘ã„å¹³æ—¥</td>
            <td><code>15W</code> â†’ 15æ—¥ã«æœ€ã‚‚è¿‘ã„å¹³æ—¥</td>
          </tr>
          <tr>
            <td><code>#</code></td>
            <td>ç¬¬næ›œæ—¥</td>
            <td><code>2#1</code> â†’ ç¬¬1æœˆæ›œæ—¥</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div class="footer">
      <p>Powered by <a href="#">QuartzCronJP</a> v<span id="version"></span></p>
    </div>
  </div>
  
  <!-- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿ -->
  <script src="quartz-cron-jp.js"></script>
  
  <script>
    // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
    var EXAMPLES = [
      { cron: '0 0 12 * * ?', desc: 'æ¯æ—¥æ­£åˆ' },
      { cron: '0 30 9 ? * MON-FRI', desc: 'å¹³æ—¥9:30' },
      { cron: '0 0/15 * * * ?', desc: '15åˆ†ã”ã¨' },
      { cron: '0 10/20 * * * ?', desc: '10åˆ†ã‹ã‚‰20åˆ†é–“éš”' },
      { cron: '0 30 8,12,18 * * ?', desc: '8ãƒ»12ãƒ»18æ™‚30åˆ†' },
      { cron: '0 0 10 ? * 2#1', desc: 'æ¯æœˆç¬¬1æœˆæ›œ10æ™‚' },
      { cron: '0 0 18 L * ?', desc: 'æ¯æœˆæœ«18æ™‚' },
      { cron: '0 30 9 ? * 1L', desc: 'æ¯æœˆæœ€çµ‚æ—¥æ›œ9:30' },
      { cron: '0 0 0 1 1 ? 2025', desc: '2025å¹´å…ƒæ—¥0æ™‚' },
      { cron: '0/1 0 2 * * ?', desc: 'æ¯æ—¥2æ™‚0åˆ†ã«æ¯ç§’' }
    ];
    
    var FIELD_LABELS = {
      second: 'ç§’',
      minute: 'åˆ†',
      hour: 'æ™‚',
      dayOfMonth: 'æ—¥',
      month: 'æœˆ',
      dayOfWeek: 'æ›œæ—¥',
      year: 'å¹´'
    };
    
    // DOMè¦ç´ 
    var cronInput = document.getElementById('cronInput');
    var resultEl = document.getElementById('result');
    var errorListEl = document.getElementById('errorList');
    var fieldsCard = document.getElementById('fieldsCard');
    var fieldsGrid = document.getElementById('fieldsGrid');
    var examplesEl = document.getElementById('examples');
    var versionEl = document.getElementById('version');
    
    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡¨ç¤º
    versionEl.textContent = QuartzCronJP.version;
    
    // ç¿»è¨³å®Ÿè¡Œ
    function translateCron() {
      var cron = cronInput.value.trim();
      
      if (!cron) {
        resultEl.textContent = 'Cronå¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
        resultEl.className = 'result';
        errorListEl.style.display = 'none';
        fieldsCard.style.display = 'none';
        return;
      }
      
      var result = QuartzCronJP.translate(cron);
      
      if (result.success) {
        resultEl.textContent = 'ğŸ“… ' + result.description;
        resultEl.className = 'result success';
        errorListEl.style.display = 'none';
        
        // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°ã‚’è¡¨ç¤º
        fieldsCard.style.display = 'block';
        renderFields(result.fields);
      } else {
        resultEl.textContent = 'âš ï¸ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼';
        resultEl.className = 'result error';
        
        // ã‚¨ãƒ©ãƒ¼ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º
        errorListEl.innerHTML = '';
        result.validationErrors.forEach(function(err) {
          var li = document.createElement('li');
          li.textContent = err;
          errorListEl.appendChild(li);
        });
        errorListEl.style.display = 'block';
        
        fieldsCard.style.display = 'none';
      }
    }
    
    // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    function renderFields(fields) {
      fieldsGrid.innerHTML = '';
      
      var fieldKeys = ['second', 'minute', 'hour', 'dayOfMonth', 'month', 'dayOfWeek', 'year'];
      
      fieldKeys.forEach(function(key) {
        var field = fields[key];
        if (!field) return;
        
        var item = document.createElement('div');
        item.className = 'field-item';
        item.innerHTML = 
          '<div class="field-label">' + FIELD_LABELS[key] + '</div>' +
          '<div class="field-raw">' + escapeHtml(field.raw) + '</div>' +
          '<div class="field-translated">' + (field.translated || '-') + '</div>';
        
        fieldsGrid.appendChild(item);
      });
    }
    
    // HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
    function escapeHtml(str) {
      var div = document.createElement('div');
      div.textContent = str;
      return div.innerHTML;
    }
    
    // ã‚µãƒ³ãƒ—ãƒ«ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    function renderExamples() {
      EXAMPLES.forEach(function(example) {
        var btn = document.createElement('button');
        btn.className = 'example-btn';
        btn.innerHTML = 
          '<div class="example-cron">' + escapeHtml(example.cron) + '</div>' +
          '<div class="example-desc">' + escapeHtml(example.desc) + '</div>';
        
        btn.addEventListener('click', function() {
          cronInput.value = example.cron;
          translateCron();
          cronInput.focus();
        });
        
        examplesEl.appendChild(btn);
      });
    }
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    cronInput.addEventListener('input', translateCron);
    
    // åˆæœŸåŒ–
    renderExamples();
    translateCron();
  </script>
</body>
</html>
